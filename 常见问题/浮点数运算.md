## 浮点数存储

 无论是单精度还是双精度在存储中都分为三个部分：

1. 符号位(Sign) : 0代表正，1代表为负
2. 指数位（Exponent）:用于存储科学计数法中的指数数据，并且采用移位存储
3. 尾数部分（Mantissa）：尾数部分

单精度表示：

![float类型的存储方式](http://note.youdao.com/yws/public/resource/7d81e6a39024a96dd86efacf29f4ca80/xmlnote/WEBRESOURCE47bef3dfe9eb4249ba823bacf3155a17/2005)



双精度表示：

![double类型数据的存储方式](http://note.youdao.com/yws/public/resource/7d81e6a39024a96dd86efacf29f4ca80/xmlnote/WEBRESOURCE7068bb0297e5496483968e5c2c3aad74/2004)



浮点数10进制可以通过**乘2取整**的方式转成二进制，

结果可能会无线循环，存放不下，就发生了截断，从而精度丢失。



## 浮点数的运算步骤

浮点数的加减运算一般由以下五个步骤完成：**对阶**、**尾数运算**、**规格化**、**舍入处理**、**溢出判断**



### 1.对阶

对阶的目的是为使两个浮点数的尾数能够进行加减运算。

因为都是科学技术法表示的，阶数可能不一样。

要小阶对大阶，因为精度丢失会小很多



会发生精度丢失



### 2.尾数运算

尾数运算就是进行完成对阶后的尾数相加减。



### 3.结果规格化

由于在进行上述两个定点小数的尾数相加减运算后，尾数有可能是非规格化形式，为此必须进行规格化操作。



### 4.舍入处理

浮点运算在对阶或右规时，尾数需要右移，被右移出去的位会被丢掉，从而造成运算结果精度的损失。



### 5.溢出判断

与定点数运算不同的是，浮点数的溢出是以其运算结果的阶码的值是否产生溢出来判断的。若阶码的值超过了阶码所能表示的最大正数，则为上溢，进一步，若此时浮点数为正数，则为正上溢，记为+∞，若浮点数为负数，则为负上溢，记为-∞；若阶码的值超过了阶码所能表示的最小负数，则为下溢，进一步，若此时浮点数为正数，则为正下溢，若浮点数为负数，则为负下溢。正下溢和负下溢都作为0处理。





## 解决方案

1. 转成整数运算
2. 使用API ： BigDecimal